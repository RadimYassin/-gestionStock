<div class="m-10 mt-6">
    <div class="mb-4 flex justify-between items-center">
      <h2 class="text-2xl  font-bold mb-4">Liste fournisseurs</h2>

      <input type="text" [(ngModel)]="searchQuery" placeholder="Rechercher un fournisseur..." 
             class="px-4 py-2 border border-gray-300 rounded-md w-1/3 focus:outline-none focus:ring focus:ring-blue-200">
    </div>
    <table class="min-w-full border border-gray-200">
      <thead class="bg-gray-100">
        <tr>
          <th class="py-2 px-4 border-b text-left">Code</th>
          <th class="py-2 px-4 border-b text-left">Nom</th>
          <th class="py-2 px-4 border-b text-left">VILLE</th>
          <th class="py-2 px-4 border-b text-left">PATENTE</th>

          <th class="py-2 px-4 border-b text-left">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let fournisseur of filteredFournisseurs()" class="even:bg-gray-50">
          <td class="py-2 px-4 border-b">{{ fournisseur.FOURNISSEUR_CODE}}</td>
          <td class="py-2 px-4 border-b">{{ fournisseur.NOM }}</td>
          <td class="py-2 px-4 border-b">{{ fournisseur.VILLE }}</td>
          <td class="py-2 px-4 border-b">{{ fournisseur.PATENTE }}</td>

          <td class="py-2 px-4 border-b">
            <button class="text-red-500 hover:text-red-700" (click)="deletefournisseur(fournisseur.FOURNISSEUR_ID)" >Supprimer</button>
            <button class="ml-2 text-blue-500 hover:text-blue-700" (click)="openModal(fournisseur)">Modifier</button>
          </td>
        </tr>
      </tbody>
    </table>

    <!-- Modal Background -->
<div *ngIf="isModalOpen" class="fixed inset-0 bg-gray-800 bg-opacity-75 flex items-center justify-center z-50">
  <!-- Modal Container -->
  <div class="bg-white rounded-lg shadow-lg w-96">
    <!-- Modal Header -->
    <div class="flex justify-between items-center border-b px-4 py-2">
      <h3 class="text-xl font-semibold">Modifier Fournisseur</h3>
      <button class="text-gray-600 hover:text-gray-800" (click)="closeModal()">Ã—</button>
    </div>
    
    <!-- Modal Body -->
    <div class="px-6 py-4">
      <div class="mb-4">
        <label class="block text-sm font-medium text-gray-700">Code</label>
        <input type="text" [(ngModel)]="selectedFournisseur.FOURNISSEUR_CODE" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring focus:ring-blue-200">
      </div>

      <div class="mb-4">
        <label class="block text-sm font-medium text-gray-700">Nom</label>
        <input type="text" [(ngModel)]="selectedFournisseur.NOM" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring focus:ring-blue-200">
      </div>

      <div class="mb-4">
        <label class="block text-sm font-medium text-gray-700">Ville</label>
        <input type="text" [(ngModel)]="selectedFournisseur.VILLE" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring focus:ring-blue-200">
      </div>

      <div class="mb-4">
        <label class="block text-sm font-medium text-gray-700">Patente</label>
        <input type="text" [(ngModel)]="selectedFournisseur.PATENTE" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring focus:ring-blue-200">
      </div>
    </div>
    
    <!-- Modal Footer -->
    <div class="flex justify-end px-4 py-2 border-t">
      <button class="mr-2 bg-gray-300 text-gray-800 px-4 py-2 rounded-md" (click)="closeModal()">Annuler</button>
      <button class="bg-blue-600 text-white px-4 py-2 rounded-md" (click)="updateFournisseur()">Enregistrer</button>
    </div>
  </div>
</div>
